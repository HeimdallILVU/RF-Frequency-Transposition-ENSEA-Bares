; Top Design: "project_system_lib:test_LNA_noise_opt:schematic"
; Netlisted using Hierarchy Policy: "Standard"

Options ResourceUsage=yes UseNutmegFormat=no EnableOptim=no TopDesignName="project_system_lib:test_LNA_noise_opt:schematic" DcopOutputNodeVoltages=yes DcopOutputPinCurrents=yes DcopOutputAllSweepPoints=no DcopOutputDcopType=0
; Library Name: project_system_lib
; Cell Name: LNA_GRF2070
; View Name: schematic
define LNA_GRF2070 ( EN  Gnd  NC  RFin  RFout ) 
;parameters 
R:R1  EN Gnd R=1 kOhm Noise=yes 
#uselib "ckt" , "S2P"
S2P:SNP1  RFin RFout Gnd File="C:\Users\benji\Documents\GitHub\system_project_ENSEA\Sparam_source\GRF2070_2080_5V_70mA_25C.s2p" Type="touchstone" InterpMode="linear" InterpDom="" ExtrapMode="constant" Temp=27.0 CheckPassivity=0 
end LNA_GRF2070

; Library Name: project_system_lib
; Cell Name: LNA_GRF2070_with_polar
; View Name: schematic
define LNA_GRF2070_with_polar ( EN  Gnd  RFin  RFout  Vdd ) 
;parameters 
C:C2  Vdd Gnd C=0.1 uF 
L:L1  N__7 Vdd L=22 nH Noise=yes  
C:C1  RFin N__14 C=47 pF 
LNA_GRF2070:X1  EN Gnd N__0 N__14 N__7 
C:C3  N__7 RFout C=4.7 pF 
end LNA_GRF2070_with_polar

V_Source:SRC1  N__4 0 Type="V_DC" Vdc=5 V SaveCurrent=1 
Port:TermG1  N__6 0 Num=1 Z=50 Ohm Noise=yes Temp=25 
Port:TermG2  N__0 0 Num=2 Z=50 Ohm Noise=yes Temp=25 
LNA_GRF2070_with_polar:X1  N__4 0 N__6 N__0 N__4 
S_Param:SP1 CalcS=yes CalcY=no CalcZ=no GroupDelayAperture=1e-4 FreqConversion=no FreqConversionPort=1 StatusLevel=2 CalcNoise=yes SortNoise=0 BandwidthForNoise=1.0 Hz DevOpPtLevel=0 NoiseInputPort=1 NoiseOutputPort=2 SPSS_WSP=yes \
SweepVar="freq" SweepPlan="SP1_stim" OutputPlan="SP1_Output" 

SweepPlan: SP1_stim Start=500 MHz Stop=1.2 GHz Step=100 kHz 

OutputPlan:SP1_Output \
      Type="Output" \
      UseEquationNestLevel=yes \
      EquationNestLevel=2 \
      UseSavedEquationNestLevel=yes \
      SavedEquationNestLevel=2

#load "python","LinearCollapse"
Component Module="LinearCollapse" Type="ModelExtractor" NetworkRepresentation=2
aele Zopt1=zopt(Sopt,PortZ1);
aele Zin1=zin(S11,PortZ1);
